<!DOCTYPE html>

<head>
    <title>Miasto</title>
    <link rel="stylesheet" href="css/glowny.css">
    <script src="script/klasy.js" defer></script>
    <script src="script/potwor.js" defer></script>
    <script>
        window.onload = function() {
            var klasa;
            var p = new potwor;
            let wojownik_w = document.getElementById('wojownik');
            let lucznik_w = document.getElementById('lucznik');
            let mag_w = document.getElementById('mag');

            wojownik_w.addEventListener('click', setWojownik);
            lucznik_w.addEventListener('click', setLucznik);
            mag_w.addEventListener('click', setMag);

            function setWojownik() {
                tlo1 = document.getElementById('t1');
                tlo = document.getElementById('t');

                tlo1.style.display = "none";
                tlo.style.display = "flex";

                var a = wojownik;
                const wojo_s = new Wojownik();

                klasa = wojo_s;
                klasa.LevelUp();
                klasa.Update_stats();
                setStats();
            }

            let lucznik = document.getElementById('lucznik');

            lucznik.addEventListener('click', setLucznik);

            function setLucznik() {
                tlo1 = document.getElementById('t1');
                tlo = document.getElementById('t');

                tlo1.style.display = "none";
                tlo.style.display = "flex";

                var a = lucznik;
                const lucz_s = new Lucznik();

                klasa = lucz_s;
                klasa.LevelUp();
                klasa.Update_stats();
                setStats();
            }

            let mag = document.getElementById('mag');
            mag.addEventListener('click', setMag);

            function setMag() {
                tlo1 = document.getElementById('t1');
                tlo = document.getElementById('t');

                tlo1.style.display = "none";
                tlo.style.display = "flex";

                var a = mag;
                const mag_s = new Mag();

                klasa = mag_s;
                klasa.LevelUp();
                klasa.Update_stats();
                setStats();
            }



            let targowisko = document.getElementById('targowisko');
            let karczma = document.getElementById('karczma');
            let miasto = document.getElementById('miasto');
            let kuznia = document.getElementById('kuznia');
            let walka = document.getElementById('walka');

            miasto.addEventListener('click', setMiasto);
            karczma.addEventListener('click', setKarczma);
            targowisko.addEventListener('click', setTargowisko);
            kuznia.addEventListener('click', setKuznia);
            walka.addEventListener('click', setWalka);



            function setMiasto() {
                srodek0 = document.getElementById('s0');
                srodek1 = document.getElementById('s1');
                srodek2 = document.getElementById('s2');
                srodek3 = document.getElementById('s3');
                walka = document.getElementById('w');

                srodek0.style.display = "block";
                srodek1.style.display = "none";
                srodek2.style.display = "none";
                srodek3.style.display = "none";
                walka.style.display = "none";
            }

            function setKarczma() {
                srodek0 = document.getElementById('s0');
                srodek1 = document.getElementById('s1');
                srodek2 = document.getElementById('s2');
                srodek3 = document.getElementById('s3');
                walka = document.getElementById('w');

                srodek0.style.display = "none";
                srodek1.style.display = "block";
                srodek2.style.display = "none";
                srodek3.style.display = "none";
                walka.style.display = "none";
            }

            function setTargowisko() {
                srodek0 = document.getElementById('s0');
                srodek1 = document.getElementById('s1');
                srodek2 = document.getElementById('s2');
                srodek3 = document.getElementById('s3');
                walka = document.getElementById('w');

                srodek0.style.display = "none";
                srodek1.style.display = "none";
                srodek2.style.display = "block";
                srodek3.style.display = "none";
                walka.style.display = "none";
            }

            function setKuznia() {
                srodek0 = document.getElementById('s0');
                srodek1 = document.getElementById('s1');
                srodek2 = document.getElementById('s2');
                srodek3 = document.getElementById('s3');
                walka = document.getElementById('w');

                srodek0.style.display = "none";
                srodek1.style.display = "none";
                srodek2.style.display = "none";
                walka.style.display = "none";
                srodek3.style.display = "block";
            }

            function setWalka() {
                srodek0 = document.getElementById('s0');
                srodek1 = document.getElementById('s1');
                srodek2 = document.getElementById('s2');
                srodek3 = document.getElementById('s3');
                walka = document.getElementById('w');

                srodek0.style.display = "none";
                srodek1.style.display = "none";
                srodek2.style.display = "none";
                walka.style.display = "block";
                srodek3.style.display = "none";
            }

            function setStats() {
                klasa.Update_stats();
                int = document.getElementById('tabela_int');
                atak = document.getElementById('tabela_atak');
                dex = document.getElementById('tabela_dex');
                def = document.getElementById('tabela_def');
                str = document.getElementById('tabela_str');
                hp = document.getElementById('tabela_hp');
                hp2 = document.getElementById('tabela_hp2');
                mana = document.getElementById('tabela_mana1');
                mana2 = document.getElementById('tabela_mana2');
                gold = document.getElementById('tabela_zloto');
                exp = document.getElementById('tabela_exp1');
                exp2 = document.getElementById('tabela_exp2');
                lvl = document.getElementById('tabela_lvl');
                //mikstury
                min_hp = document.getElementById('min_hp');
                max_hp = document.getElementById('max_hp');
                min_mp = document.getElementById('min_mp');
                max_mp = document.getElementById('max_mp');


                int.innerHTML = klasa.Int;
                atak.innerHTML = klasa.Attack;
                dex.innerHTML = klasa.Dex;
                def.innerHTML = klasa.Def;
                str.innerHTML = klasa.Str;
                hp2.innerHTML = klasa.MaxHp;
                hp.innerHTML = klasa.Hp;
                mana.innerHTML = klasa.Mana;
                mana2.innerHTML = klasa.MaxMana;
                gold.innerHTML = klasa.Gold;
                exp.innerHTML = klasa.Exp;
                exp2.innerHTML = klasa.ExpUp;
                lvl.innerHTML = klasa.Lvl;

                //mikstury
                min_hp.innerHTML = klasa.Backpack[0];
                max_hp.innerHTML = klasa.Backpack[1];
                min_mp.innerHTML = klasa.Backpack[2];
                max_mp.innerHTML = klasa.Backpack[3];

            }

			Atak = document.getElementById('walka_akcja_1').addEventListener('click', Atakuj);


            MisjaI = document.getElementById('walka').addEventListener('click', Misja1);
            MisjaII = document.getElementById('karczma_akcja_2').addEventListener('click', Misja2);

            Upg_wep = document.getElementById('kuznia_akcja_1').addEventListener('click', UpgreadWep);
            Upg_zbr = document.getElementById('kuznia_akcja_2').addEventListener('click', UpgreadChes);
            Upg_buty = document.getElementById('kuznia_akcja_3').addEventListener('click', UpgreadBoots);
            Upg_rek = document.getElementById('kuznia_akcja_4').addEventListener('click', UpgreadGlove);
            Upg_helm = document.getElementById('kuznia_akcja_5').addEventListener('click', UpgreadHelm);
	
			function Atakuj() {
			console.log('funkcja atakuj');
			
			
			}


            function Misja1() {
                let level = klasa.Lvl;
				setWalka();
                console.log('Level postaci: ' + level);
                p.ustaw(level);
				
               /* if (p.walka(klasa) == 1) {
                    console.log(klasa.Gold);
                    console.log(klasa.Exp);
                    klasa.Gold += (klasa.Lvl * 6) + klasa.Dex;
                    klasa.Exp += klasa.Lvl + klasa.Int;
                    alert('Misja zakończona powodzeniem!');
                    if (klasa.Exp > klasa.ExpUp) {
                        klasa.LevelUp();
                    }
                    setStats();
                } else {
                    alert('Poległeś w walce z potworem.');
                    klasa.Hp = 1;
                    setStats();
                }*/
            }

            function Misja2() {
                let level = klasa.Lvl;
                console.log('Level postaci: ' + level);
                p.ustaw(level);
                if (p.walka(klasa) == 1) {
                    console.log(klasa.Gold);
                    console.log(klasa.Exp);
                    klasa.Gold += klasa.Lvl + klasa.Dex;
                    klasa.Exp += (klasa.Lvl * 6) + klasa.Int;
                    alert('Misja zakończona powodzeniem!');
                    setStats();
                } else {
                    alert('Poległeś w walce z potworem.');
                    klasa.Hp = 1;
                    setStats();
                }
            }


            function UpgreadWep() {
                gold = klasa.Gold;
                if (gold >= 10) {
                    klasa.Ekwipunek.Upgrade_wep();
                    klasa.Gold = gold - 10;
                    console.log(klasa.Gold);
                    console.log(klasa.Ekwipunek);
                } else
                    alert('Za mało golda');

                klasa.Update_stats();
                setStats();
            }

            function UpgreadChes() {
                gold = klasa.Gold;
                if (gold >= 10) {
                    klasa.Ekwipunek.Upgrade_chest();
                    klasa.Gold = gold - 10;
                    console.log(klasa.Gold);
                    console.log(klasa.Ekwipunek);
                } else
                    alert('Za mało golda');

                klasa.Update_stats();
                setStats();
            }

            function UpgreadBoots() {
                gold = klasa.Gold;
                if (gold >= 5) {
                    klasa.Ekwipunek.Upgrade_boots();
                    klasa.Gold = gold - 5;
                    console.log(klasa.Gold);
                    console.log(klasa.Ekwipunek);
                } else
                    alert('Za mało golda');

                klasa.Update_stats();
                setStats();
            }

            function UpgreadGlove() {
                gold = klasa.Gold;
                if (gold >= 5) {
                    klasa.Ekwipunek.Upgrade_gl();
                    klasa.Gold = gold - 5;
                    console.log(klasa.Gold);
                    console.log(klasa.Ekwipunek);
                } else
                    alert('Za mało golda');

                klasa.Update_stats();
                setStats();
            }

            function UpgreadHelm() {
                gold = klasa.Gold;
                if (gold >= 6) {
                    klasa.Ekwipunek.Upgrade_helm();
                    klasa.Gold = gold - 6;
                    console.log(klasa.Gold);
                    console.log(klasa.Ekwipunek);
                } else
                    alert('Za mało golda');

                klasa.Update_stats();
                setStats();
            }

            let min_hp = document.getElementById('targowisko_akcja_1').addEventListener('click', Update_backpack);
            let max_hp = document.getElementById('targowisko_akcja_2').addEventListener('click', Update_backpack);
            let min_mp = document.getElementById('targowisko_akcja_3').addEventListener('click', Update_backpack);
            let max_mp = document.getElementById('targowisko_akcja_4').addEventListener('click', Update_backpack);


            function Update_backpack(event) {
                let wartosc = event.target.id;

                console.log(wartosc);
                if (wartosc == 'targowisko_akcja_1') {
                    let slot = 0;
                    klasa.Update_backpack(slot, 'add');
                    document.getElementById('min_hp').innerHTML = klasa.Backpack[0];
                }
                if (wartosc == 'targowisko_akcja_2') {
                    let slot = 1;
                    klasa.Update_backpack(slot, 'add');
                    document.getElementById('max_hp').innerHTML = klasa.Backpack[1];
                }
                if (wartosc == 'targowisko_akcja_3') {
                    let slot = 2;
                    klasa.Update_backpack(slot, 'add');
                    document.getElementById('min_mp').innerHTML = klasa.Backpack[2];
                }
                if (wartosc == 'targowisko_akcja_4') {
                    let slot = 3;
                    klasa.Update_backpack(slot, 'add');
                    document.getElementById('max_mp').innerHTML = klasa.Backpack[3];
                }
            }

            let min_hp_use = document.getElementById('miasto_akcja_1').addEventListener('click', use_potion);
            let max_hp_use = document.getElementById('miasto_akcja_2').addEventListener('click', use_potion);
            let min_mp_use = document.getElementById('miasto_akcja_3').addEventListener('click', use_potion);
            let max_mp_use = document.getElementById('miasto_akcja_4').addEventListener('click', use_potion);

            function use_potion(event) {

                console.log(event.target.id);

                if (event.target.id == 'miasto_akcja_1') {

                    if (klasa.Backpack[0] >= 1) {

                        if (klasa.MaxHp - klasa.Hp >= 10) {
                            klasa.Hp = +10;
                            setStats();
                        } else {
                            klasa.Hp = klasa.MaxHp;
                            setStats();
                        }
                    }
                }

                if (event.target.id == 'miasto_akcja_2') {

                    if (klasa.Backpack[1] >= 1) {
                        if (klasa.MaxHp - klasa.Hp >= 30) {
                            klasa.Hp = +30;
                            setStats();
                        } else {
                            klasa.Hp = klasa.MaxHp;
                            setStats();
                        }
                    }
                }

                if (event.target.id == 'miasto_akcja_3') {

                    if (klasa.Backpack[2] >= 1) {
                        if (klasa.MaxMana - klasa.Mana >= 10) {
                            klasa.Mana = +10;
                            setStats();
                        } else {
                            klasa.Mana = klasa.MaxMana;
                            setStats();
                        }
                    }
                }


                if (event.target.id == 'miasto_akcja_4') {

                    if (klasa.Backpack[3] >= 1) {
                        if (klasa.MaxMana - klasa.Mana >= 10) {
                            klasa.Mana = +10;
                            setStats();
                        } else {
                            klasa.Mana = klasa.MaxMana;
                            setStats();
                        }
                    }
                }
            }

        }
    </script>
</head>

<body>

    <div class="kontener">

        <div class="tlo1" id="t1">

            <div class="wojownik">
                <p>Wojownik</p>
                Wojownik charakteryzuje się najwyższą ilością punktów życia spośród wszystkich profesji. Jest powolny ale zadaje duże obrażenia i posiada gruby pancerz.
                <img src="obrazy/wojownik.jpg" />
                </br>
                <input id="wojownik" value="wojownik" type="button">
            </div>

            <div class="lucznik">
                <p>Łucznik</p>
                Łucznik jest bardzo szybki, potrafi uderzyć dwa razy pod rząd. Jego zręczność pozwala także na uniknięcie ciosu przeciwnika. Jest to klasa daleko dystansowa, co oznacza, że oponent musi stracić dwie tury aby do niego podejść.
                <img src="obrazy/lucznik.jpg" />
                </br>
                <input id="lucznik" value="lucznik" type="button">
            </div>

            <div class="mag">
                <p>Mag</p>
                Mag polega na swojej inteligencji i księgi czarów, którą posiada. Dzięki niej ma dostęp do różnych zaklęć żywiiołów. Przeciwnik aby go zaatakować musi zbliżyć sie do niego i stracić jedną turę.
                <img src="obrazy/mag.jpg" />
                </br>
                <input id="mag" value="mag" type="button">
            </div>
        </div>

        <div class="tlo" id="t">
            <div class="klasa1">

                <input id="miasto" value="Miasto" type="button">
                <input id="karczma" value="Karczma" type="button">
                <input id="targowisko" value="Targowisko" type="button">
                <input id="kuznia" value="Kuźnia" type="button">

            </div>

            <div class="klasa2">
                <div class="srodek0" id="s0">
                    <!-- MIASTO -->

                    <input id="miasto_akcja_1" value="Uzyj mikstury na HP mała" type="button">
                    <input id="miasto_akcja_2" value="Uzyj mikstury na HP duża" type="button">
                    <input id="miasto_akcja_3" value="Uzyj mikstury na MP mała" type="button">
                    <input id="miasto_akcja_4" value="Uzyj mikstury na MP duża" type="button">

                </div>



                <div class="walka" id="w">
                    <!-- WALKA -->

                    <div class="logi">

                    </div>

                    <input id="walka_akcja_1" value="Atakuj" type="button">
                    <input id="walka_akcja_2" value="Mikstura życia" type="button">
                    <input id="walka_akcja_3" value="Miktura many" type="button">
                    <input id="walka_akcja_4" value="Uciekaj" type="button">
                </div>


                <div class="srodek1" id="s1">
                    <!-- KARCZMA -->

                    <input id="walka" value="Misja 1" type="button">
                    <input id="karczma_akcja_2" value="Misja 2" type="button">
                    <input id="karczma_akcja_3" value="Misja 3" type="button">
                    <input id="karczma_akcja_4" value="Misja 4" type="button">


                </div>


                <div class="srodek2" id="s2">
                    <!-- TARGOWISKO -->

                    <input id="targowisko_akcja_1" value="Mały eliksir życia" type="button">
                    <input id="targowisko_akcja_2" value="Duży eliksir życia" type="button">
                    <input id="targowisko_akcja_3" value="Mały eliksir many" type="button">
                    <input id="targowisko_akcja_4" value="Duży eliksir many" type="button">

                </div>


                <div class="srodek3" id="s3">
                    <!-- KUŹNIA -->

                    <input id="kuznia_akcja_1" value="Ulepsz broń" type="button">
                    <input id="kuznia_akcja_2" value="Ulepsz zbroje" type="button">
                    <input id="kuznia_akcja_3" value="Ulepsz buty" type="button">
                    <input id="kuznia_akcja_4" value="Ulepsz rękawice" type="button">
                    <input id="kuznia_akcja_5" value="Ulepsz hełm" type="button">

                </div>
            </div>

            <div class="klasa3">

                <!-- <img src="obrazy/wojownik.jpg"/> <img src="obrazy/mag.jpg"/>-->
            </div>

            <div class="klasa4">

                <table>
                    <tr>
                        <td colspan="7" class="naglowek_tabeli">STATYSTYKI</td>
                    </tr>
                    <tr>
                        <td>Poziom</td>
                        <td id="tabela_lvl"></td>
                        <td>|</td>
                        <td>Doświadczenie</td>
                        <td id="tabela_exp1"></td>
                        <td>/</td>
                        <td id="tabela_exp2"></td>
                    </tr>
                    <tr>
                        <td>Atak</td>
                        <td id="tabela_atak"></td>
                        <td>|</td>
                        <td>Obrona</td>
                        <td colspan="3" id="tabela_def"></td>
                    </tr>
                    <tr>
                        <td>Zręczność</td>
                        <td id="tabela_dex"></td>
                        <td>|</td>
                        <td>Punkty życia</td>
                        <td id="tabela_hp"></td>
                        <td>/</td>
                        <td id="tabela_hp2"></td>
                    </tr>
                    <tr>
                        <td>Siła</td>
                        <td id="tabela_str"></td>
                        <td>|</td>
                        <td>Punkty many</td>
                        <td id="tabela_mana1"></td>
                        <td>/</td>
                        <td id="tabela_mana2"></td>
                    </tr>
                    <tr>
                        <td>Inteligencja</td>
                        <td id="tabela_int"></td>
                        <td>|</td>
                        <td>Złoto</td>
                        <td colspan="3" id="tabela_zloto"></td>
                    </tr>
                </table>




                <table>
                    <tr>
                        <td colspan="2" class="naglowek_tabeli">EKWIPUNEK</td>
                    </tr>
                    <tr>
                        <td>Eliksir Hp Min</td>
                        <td id="min_hp">0</td>
                    </tr>
                    <tr>
                        <td>Eliksir Mp Min</td>
                        <td id="min_mp">0</td>
                    </tr>
                    <tr>
                        <td>Eliksir Hp Max</td>
                        <td id="max_hp">0</td>
                    </tr>
                    <tr>
                        <td>Eliksir Mp Max</td>
                        <td id="max_mp">0</td>
                    </tr>
                </table>

            </div>
        </div>

    </div>

</body>

</html>